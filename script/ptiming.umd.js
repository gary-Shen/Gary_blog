!function(n){"function"==typeof define&&define.amd?define(n):n()}(function(){"use strict";var n=[{name:"DNSLookup",start:"domainLookupStart",end:"domainLookupEnd",description:"DNS解析耗时"},{name:"TCPConnection",start:"connectStart",end:"connectEnd",description:"TCP连接耗时"},{name:"SSLConnection",start:"secureConnectionStart",end:"connectEnd",description:"SSL连接耗时"},{name:"FirstByte",start:"domainLookupStart",end:"responseStart",description:"第一个字节时间"},{name:"TimeToInteractive",start:"fetchStart",end:"domInteractive",description:"首次可交互时间"},{name:"TTFB",start:"requestStart",end:"responseStart",description:"网络请求时间（TTFB）"},{name:"PageLoadDuration",start:"fetchStart",end:"loadEventStart",description:"页面完全加载时间"},{name:"DOMReady",start:"fetchStart",end:"domContentLoadedEventEnd",description:"DOM解析耗时"},{name:"ResourceLoadDuration",start:"domContentLoadedEventEnd",end:"loadEventStart",description:"资源加载耗时"},{name:"Blank",start:"fetchStart",end:"responseEnd",description:"白屏时间"},{name:"TransferDuration",start:"responseStart",end:"responseEnd",description:"数据传输耗时"},{name:"RedirectDuration",start:"redirectStart",end:"redirectEnd",description:"重定向耗时"}];function a(){return void 0===d||void 0===d.getEntriesByType}var d=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance;window.timing=window.timing||{getNavigationDuration:function(){if(!a()){var e=d.getEntriesByType("navigation")[0];return n.map(function(n){var t=e[n.end]-e[n.start];return Object.assign(n,{duration:t<0?null:t})})}},getPaintTiming:function(){if(!a())return d.getEntriesByType("paint").map(function(n){return{startTime:n.startTime,name:n.name,timeOrigin:d.timeOrigin}})},table:function(){var n,t,e,i,o,r;a()||(n=this.getNavigationDuration(),t=this.getPaintTiming(),e=d.getEntriesByType("resource"),i={},o={},r={},n.forEach(function(n){var t=n.name,e=n.duration,n=n.description;i[t]={ms:e,s:+(e/1e3).toFixed(2),description:n}}),t.forEach(function(n){var t=n.startTime,e=n.name,n=n.timeOrigin;o[e]={startTime:t,timeOrigin:n}}),e.forEach(function(n){var t=n.name,e=n.duration,i=n.decodedBodySize,n=n.transferSize;r[t]={ms:e,s:+(e/1e3).toFixed(2),decodedBodySize:i,transferSize:n}}),console.group("Navigation Timing"),console.table(i),console.groupEnd(),console.group("First Paint"),console.table(o),console.groupEnd(),console.groupCollapsed("Resource Timing"),console.table(r),console.groupEnd())}}});
